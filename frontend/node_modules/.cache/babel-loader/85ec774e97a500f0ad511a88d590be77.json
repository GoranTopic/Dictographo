{"ast":null,"code":"import { LinearFilter, Sprite, SpriteMaterial, Texture } from 'three';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar three = typeof window !== 'undefined' && window.THREE ? window.THREE // Prefer consumption from global THREE, if exists\n: {\n  LinearFilter: LinearFilter,\n  Sprite: Sprite,\n  SpriteMaterial: SpriteMaterial,\n  Texture: Texture\n};\n\nvar _default = /*#__PURE__*/function (_three$Sprite) {\n  _inherits(_default, _three$Sprite);\n\n  var _super = _createSuper(_default);\n\n  function _default() {\n    var _this;\n\n    var text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var textHeight = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n    var color = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'rgba(255, 255, 255, 1)';\n\n    _classCallCheck(this, _default);\n\n    _this = _super.call(this, new three.SpriteMaterial({\n      map: new three.Texture()\n    }));\n    _this._text = \"\".concat(text);\n    _this._textHeight = textHeight;\n    _this._color = color;\n    _this._backgroundColor = false; // no background color\n\n    _this._padding = 0;\n    _this._borderWidth = 0;\n    _this._borderColor = 'white';\n    _this._strokeWidth = 0;\n    _this._strokeColor = 'white';\n    _this._fontFace = 'Arial';\n    _this._fontSize = 90; // defines text resolution\n\n    _this._fontWeight = 'normal';\n    _this._canvas = document.createElement('canvas');\n    _this._texture = _this.material.map;\n    _this._texture.minFilter = three.LinearFilter;\n\n    _this._genCanvas();\n\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"_genCanvas\",\n    value: function _genCanvas() {\n      var _this2 = this;\n\n      var canvas = this._canvas;\n      var ctx = canvas.getContext('2d');\n      var border = Array.isArray(this.borderWidth) ? this.borderWidth : [this.borderWidth, this.borderWidth]; // x,y border\n\n      var relBorder = border.map(function (b) {\n        return b * _this2.fontSize * 0.1;\n      }); // border in canvas units\n\n      var padding = Array.isArray(this.padding) ? this.padding : [this.padding, this.padding]; // x,y padding\n\n      var relPadding = padding.map(function (p) {\n        return p * _this2.fontSize * 0.1;\n      }); // padding in canvas units\n\n      var lines = this.text.split('\\n');\n      var font = \"\".concat(this.fontWeight, \" \").concat(this.fontSize, \"px \").concat(this.fontFace);\n      ctx.font = font; // measure canvas with appropriate font\n\n      var innerWidth = Math.max.apply(Math, _toConsumableArray(lines.map(function (line) {\n        return ctx.measureText(line).width;\n      })));\n      var innerHeight = this.fontSize * lines.length;\n      canvas.width = innerWidth + relBorder[0] * 2 + relPadding[0] * 2;\n      canvas.height = innerHeight + relBorder[1] * 2 + relPadding[1] * 2; // paint border\n\n      if (this.borderWidth) {\n        ctx.strokeStyle = this.borderColor;\n\n        if (relBorder[0]) {\n          ctx.lineWidth = relBorder[0] * 2;\n          ctx.beginPath();\n          ctx.moveTo(0, 0);\n          ctx.lineTo(0, canvas.height);\n          ctx.moveTo(canvas.width, 0);\n          ctx.lineTo(canvas.width, canvas.height);\n          ctx.stroke();\n        }\n\n        if (relBorder[1]) {\n          ctx.lineWidth = relBorder[1] * 2;\n          ctx.beginPath();\n          ctx.moveTo(relBorder[0], 0);\n          ctx.lineTo(canvas.width - relBorder[0], 0);\n          ctx.moveTo(relBorder[0], canvas.height);\n          ctx.lineTo(canvas.width - relBorder[0], canvas.height);\n          ctx.stroke();\n        }\n      }\n\n      ctx.translate.apply(ctx, _toConsumableArray(relBorder)); // paint background\n\n      if (this.backgroundColor) {\n        ctx.fillStyle = this.backgroundColor;\n        ctx.fillRect(0, 0, canvas.width - relBorder[0] * 2, canvas.height - relBorder[1] * 2);\n      }\n\n      ctx.translate.apply(ctx, _toConsumableArray(relPadding)); // paint text\n\n      ctx.font = font; // Set font again after canvas is resized, as context properties are reset\n\n      ctx.fillStyle = this.color;\n      ctx.textBaseline = 'bottom';\n      var drawTextStroke = this.strokeWidth > 0;\n\n      if (drawTextStroke) {\n        ctx.lineWidth = this.strokeWidth * this.fontSize / 10;\n        ctx.strokeStyle = this.strokeColor;\n      }\n\n      lines.forEach(function (line, index) {\n        var lineX = (innerWidth - ctx.measureText(line).width) / 2;\n        var lineY = (index + 1) * _this2.fontSize;\n        drawTextStroke && ctx.strokeText(line, lineX, lineY);\n        ctx.fillText(line, lineX, lineY);\n      }); // Inject canvas into sprite\n\n      this._texture.image = canvas;\n      this._texture.needsUpdate = true;\n      var yScale = this.textHeight * lines.length + border[1] * 2 + padding[1] * 2;\n      this.scale.set(yScale * canvas.width / canvas.height, yScale, 0);\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor(this.text, this.textHeight, this.color).copy(this);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      three.Sprite.prototype.copy.call(this, source);\n      this.color = source.color;\n      this.backgroundColor = source.backgroundColor;\n      this.padding = source.padding;\n      this.borderWidth = source.borderWidth;\n      this.borderColor = source.borderColor;\n      this.fontFace = source.fontFace;\n      this.fontSize = source.fontSize;\n      this.fontWeight = source.fontWeight;\n      this.strokeWidth = source.strokeWidth;\n      this.strokeColor = source.strokeColor;\n      return this;\n    }\n  }, {\n    key: \"text\",\n    get: function get() {\n      return this._text;\n    },\n    set: function set(text) {\n      this._text = text;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"textHeight\",\n    get: function get() {\n      return this._textHeight;\n    },\n    set: function set(textHeight) {\n      this._textHeight = textHeight;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"color\",\n    get: function get() {\n      return this._color;\n    },\n    set: function set(color) {\n      this._color = color;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"backgroundColor\",\n    get: function get() {\n      return this._backgroundColor;\n    },\n    set: function set(color) {\n      this._backgroundColor = color;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"padding\",\n    get: function get() {\n      return this._padding;\n    },\n    set: function set(padding) {\n      this._padding = padding;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"borderWidth\",\n    get: function get() {\n      return this._borderWidth;\n    },\n    set: function set(borderWidth) {\n      this._borderWidth = borderWidth;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"borderColor\",\n    get: function get() {\n      return this._borderColor;\n    },\n    set: function set(borderColor) {\n      this._borderColor = borderColor;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"fontFace\",\n    get: function get() {\n      return this._fontFace;\n    },\n    set: function set(fontFace) {\n      this._fontFace = fontFace;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"fontSize\",\n    get: function get() {\n      return this._fontSize;\n    },\n    set: function set(fontSize) {\n      this._fontSize = fontSize;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"fontWeight\",\n    get: function get() {\n      return this._fontWeight;\n    },\n    set: function set(fontWeight) {\n      this._fontWeight = fontWeight;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"strokeWidth\",\n    get: function get() {\n      return this._strokeWidth;\n    },\n    set: function set(strokeWidth) {\n      this._strokeWidth = strokeWidth;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"strokeColor\",\n    get: function get() {\n      return this._strokeColor;\n    },\n    set: function set(strokeColor) {\n      this._strokeColor = strokeColor;\n\n      this._genCanvas();\n    }\n  }]);\n\n  return _default;\n}(three.Sprite);\n\nexport default _default;","map":{"version":3,"sources":["/home/telix/dictographo/frontend/node_modules/three-spritetext/dist/three-spritetext.module.js"],"names":["LinearFilter","Sprite","SpriteMaterial","Texture","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_inherits","subClass","superClass","create","constructor","value","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","call","e","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","arguments","apply","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","Symbol","iterator","from","minLen","n","slice","name","test","len","arr2","three","window","THREE","_default","_three$Sprite","_super","_this","text","undefined","textHeight","color","map","_text","concat","_textHeight","_color","_backgroundColor","_padding","_borderWidth","_borderColor","_strokeWidth","_strokeColor","_fontFace","_fontSize","_fontWeight","_canvas","document","createElement","_texture","material","minFilter","_genCanvas","_this2","canvas","ctx","getContext","border","borderWidth","relBorder","b","fontSize","padding","relPadding","lines","split","font","fontWeight","fontFace","innerWidth","Math","max","line","measureText","width","innerHeight","height","strokeStyle","borderColor","lineWidth","beginPath","moveTo","lineTo","stroke","translate","backgroundColor","fillStyle","fillRect","textBaseline","drawTextStroke","strokeWidth","strokeColor","forEach","index","lineX","lineY","strokeText","fillText","image","needsUpdate","yScale","scale","set","clone","copy","source","get"],"mappings":"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","sourcesContent":["import { LinearFilter, Sprite, SpriteMaterial, Texture } from 'three';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar three = typeof window !== 'undefined' && window.THREE ? window.THREE // Prefer consumption from global THREE, if exists\n: {\n  LinearFilter: LinearFilter,\n  Sprite: Sprite,\n  SpriteMaterial: SpriteMaterial,\n  Texture: Texture\n};\n\nvar _default = /*#__PURE__*/function (_three$Sprite) {\n  _inherits(_default, _three$Sprite);\n\n  var _super = _createSuper(_default);\n\n  function _default() {\n    var _this;\n\n    var text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var textHeight = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n    var color = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'rgba(255, 255, 255, 1)';\n\n    _classCallCheck(this, _default);\n\n    _this = _super.call(this, new three.SpriteMaterial({\n      map: new three.Texture()\n    }));\n    _this._text = \"\".concat(text);\n    _this._textHeight = textHeight;\n    _this._color = color;\n    _this._backgroundColor = false; // no background color\n\n    _this._padding = 0;\n    _this._borderWidth = 0;\n    _this._borderColor = 'white';\n    _this._strokeWidth = 0;\n    _this._strokeColor = 'white';\n    _this._fontFace = 'Arial';\n    _this._fontSize = 90; // defines text resolution\n\n    _this._fontWeight = 'normal';\n    _this._canvas = document.createElement('canvas');\n    _this._texture = _this.material.map;\n    _this._texture.minFilter = three.LinearFilter;\n\n    _this._genCanvas();\n\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"_genCanvas\",\n    value: function _genCanvas() {\n      var _this2 = this;\n\n      var canvas = this._canvas;\n      var ctx = canvas.getContext('2d');\n      var border = Array.isArray(this.borderWidth) ? this.borderWidth : [this.borderWidth, this.borderWidth]; // x,y border\n\n      var relBorder = border.map(function (b) {\n        return b * _this2.fontSize * 0.1;\n      }); // border in canvas units\n\n      var padding = Array.isArray(this.padding) ? this.padding : [this.padding, this.padding]; // x,y padding\n\n      var relPadding = padding.map(function (p) {\n        return p * _this2.fontSize * 0.1;\n      }); // padding in canvas units\n\n      var lines = this.text.split('\\n');\n      var font = \"\".concat(this.fontWeight, \" \").concat(this.fontSize, \"px \").concat(this.fontFace);\n      ctx.font = font; // measure canvas with appropriate font\n\n      var innerWidth = Math.max.apply(Math, _toConsumableArray(lines.map(function (line) {\n        return ctx.measureText(line).width;\n      })));\n      var innerHeight = this.fontSize * lines.length;\n      canvas.width = innerWidth + relBorder[0] * 2 + relPadding[0] * 2;\n      canvas.height = innerHeight + relBorder[1] * 2 + relPadding[1] * 2; // paint border\n\n      if (this.borderWidth) {\n        ctx.strokeStyle = this.borderColor;\n\n        if (relBorder[0]) {\n          ctx.lineWidth = relBorder[0] * 2;\n          ctx.beginPath();\n          ctx.moveTo(0, 0);\n          ctx.lineTo(0, canvas.height);\n          ctx.moveTo(canvas.width, 0);\n          ctx.lineTo(canvas.width, canvas.height);\n          ctx.stroke();\n        }\n\n        if (relBorder[1]) {\n          ctx.lineWidth = relBorder[1] * 2;\n          ctx.beginPath();\n          ctx.moveTo(relBorder[0], 0);\n          ctx.lineTo(canvas.width - relBorder[0], 0);\n          ctx.moveTo(relBorder[0], canvas.height);\n          ctx.lineTo(canvas.width - relBorder[0], canvas.height);\n          ctx.stroke();\n        }\n      }\n\n      ctx.translate.apply(ctx, _toConsumableArray(relBorder)); // paint background\n\n      if (this.backgroundColor) {\n        ctx.fillStyle = this.backgroundColor;\n        ctx.fillRect(0, 0, canvas.width - relBorder[0] * 2, canvas.height - relBorder[1] * 2);\n      }\n\n      ctx.translate.apply(ctx, _toConsumableArray(relPadding)); // paint text\n\n      ctx.font = font; // Set font again after canvas is resized, as context properties are reset\n\n      ctx.fillStyle = this.color;\n      ctx.textBaseline = 'bottom';\n      var drawTextStroke = this.strokeWidth > 0;\n\n      if (drawTextStroke) {\n        ctx.lineWidth = this.strokeWidth * this.fontSize / 10;\n        ctx.strokeStyle = this.strokeColor;\n      }\n\n      lines.forEach(function (line, index) {\n        var lineX = (innerWidth - ctx.measureText(line).width) / 2;\n        var lineY = (index + 1) * _this2.fontSize;\n        drawTextStroke && ctx.strokeText(line, lineX, lineY);\n        ctx.fillText(line, lineX, lineY);\n      }); // Inject canvas into sprite\n\n      this._texture.image = canvas;\n      this._texture.needsUpdate = true;\n      var yScale = this.textHeight * lines.length + border[1] * 2 + padding[1] * 2;\n      this.scale.set(yScale * canvas.width / canvas.height, yScale, 0);\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor(this.text, this.textHeight, this.color).copy(this);\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(source) {\n      three.Sprite.prototype.copy.call(this, source);\n      this.color = source.color;\n      this.backgroundColor = source.backgroundColor;\n      this.padding = source.padding;\n      this.borderWidth = source.borderWidth;\n      this.borderColor = source.borderColor;\n      this.fontFace = source.fontFace;\n      this.fontSize = source.fontSize;\n      this.fontWeight = source.fontWeight;\n      this.strokeWidth = source.strokeWidth;\n      this.strokeColor = source.strokeColor;\n      return this;\n    }\n  }, {\n    key: \"text\",\n    get: function get() {\n      return this._text;\n    },\n    set: function set(text) {\n      this._text = text;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"textHeight\",\n    get: function get() {\n      return this._textHeight;\n    },\n    set: function set(textHeight) {\n      this._textHeight = textHeight;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"color\",\n    get: function get() {\n      return this._color;\n    },\n    set: function set(color) {\n      this._color = color;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"backgroundColor\",\n    get: function get() {\n      return this._backgroundColor;\n    },\n    set: function set(color) {\n      this._backgroundColor = color;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"padding\",\n    get: function get() {\n      return this._padding;\n    },\n    set: function set(padding) {\n      this._padding = padding;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"borderWidth\",\n    get: function get() {\n      return this._borderWidth;\n    },\n    set: function set(borderWidth) {\n      this._borderWidth = borderWidth;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"borderColor\",\n    get: function get() {\n      return this._borderColor;\n    },\n    set: function set(borderColor) {\n      this._borderColor = borderColor;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"fontFace\",\n    get: function get() {\n      return this._fontFace;\n    },\n    set: function set(fontFace) {\n      this._fontFace = fontFace;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"fontSize\",\n    get: function get() {\n      return this._fontSize;\n    },\n    set: function set(fontSize) {\n      this._fontSize = fontSize;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"fontWeight\",\n    get: function get() {\n      return this._fontWeight;\n    },\n    set: function set(fontWeight) {\n      this._fontWeight = fontWeight;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"strokeWidth\",\n    get: function get() {\n      return this._strokeWidth;\n    },\n    set: function set(strokeWidth) {\n      this._strokeWidth = strokeWidth;\n\n      this._genCanvas();\n    }\n  }, {\n    key: \"strokeColor\",\n    get: function get() {\n      return this._strokeColor;\n    },\n    set: function set(strokeColor) {\n      this._strokeColor = strokeColor;\n\n      this._genCanvas();\n    }\n  }]);\n\n  return _default;\n}(three.Sprite);\n\nexport default _default;\n"]},"metadata":{},"sourceType":"module"}