{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderGraph = renderGraph;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _graph = _interopRequireDefault(require(\"./graph.const\"));\n\nvar _marker = require(\"../marker/marker.const\");\n\nvar _Link = _interopRequireDefault(require(\"../link/Link\"));\n\nvar _Node = _interopRequireDefault(require(\"../node/Node\"));\n\nvar _Marker = _interopRequireDefault(require(\"../marker/Marker\"));\n\nvar _graph2 = require(\"./graph.builder\");\n\nvar _graph3 = require(\"../graph/graph.helper\");\n\nvar _collapse = require(\"./collapse.helper\");\n\nvar _marker2 = require(\"../marker/marker.helper\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\n * Build Link components given a list of links.\n * @param  {Object.<string, Object>} nodes - same as {@link #graphrenderer|nodes in renderGraph}.\n * @param  {Array.<Object>} links - array of links {@link #Link|Link}.\n * @param  {Array.<Object>} linksMatrix - array of links {@link #Link|Link}.\n * @param  {Object} config - same as {@link #graphrenderer|config in renderGraph}.\n * @param  {Function[]} linkCallbacks - same as {@link #graphrenderer|linkCallbacks in renderGraph}.\n * @param  {string} highlightedNode - same as {@link #graphrenderer|highlightedNode in renderGraph}.\n * @param  {Object} highlightedLink - same as {@link #graphrenderer|highlightedLink in renderGraph}.\n * @param  {number} transform - value that indicates the amount of zoom transformation.\n * @returns {Array.<Object>} returns the generated array of Link components.\n * @memberof Graph/renderer\n */\n\n\nfunction _renderLinks(nodes, links, linksMatrix, config, linkCallbacks, highlightedNode, highlightedLink, transform) {\n  var outLinks = links;\n\n  if (config.collapsible) {\n    outLinks = outLinks.filter(function (_ref) {\n      var isHidden = _ref.isHidden;\n      return !isHidden;\n    });\n  }\n\n  return outLinks.map(function (link) {\n    var source = link.source,\n        target = link.target;\n    var sourceId = (0, _graph3.getId)(source);\n    var targetId = (0, _graph3.getId)(target);\n    var key = \"\".concat(sourceId).concat(_graph[\"default\"].COORDS_SEPARATOR).concat(targetId);\n    var props = (0, _graph2.buildLinkProps)(_objectSpread({}, link, {\n      source: \"\".concat(sourceId),\n      target: \"\".concat(targetId)\n    }), nodes, linksMatrix, config, linkCallbacks, \"\".concat(highlightedNode), highlightedLink, transform);\n    return _react[\"default\"].createElement(_Link[\"default\"], _extends({\n      key: key,\n      id: key\n    }, props));\n  });\n}\n/**\n * Function that builds Node components.\n * @param  {Object.<string, Object>} nodes - an object containing all nodes mapped by their id.\n * @param  {Function[]} nodeCallbacks - array of callbacks for used defined event handler for node interactions.\n * @param  {Object} config - an object containing rd3g consumer defined configurations {@link #config config} for the graph.\n * @param  {string} highlightedNode - this value contains a string that represents the some currently highlighted node.\n * @param  {Object} highlightedLink - this object contains a source and target property for a link that is highlighted at some point in time.\n * @param  {string} highlightedLink.source - id of source node for highlighted link.\n * @param  {string} highlightedLink.target - id of target node for highlighted link.\n * @param  {number} transform - value that indicates the amount of zoom transformation.\n * @param  {Object.<string, Object>} linksMatrix - the matrix of connections of the graph\n * @returns {Array.<Object>} returns the generated array of node components\n * @memberof Graph/renderer\n */\n\n\nfunction _renderNodes(nodes, nodeCallbacks, config, highlightedNode, highlightedLink, transform, linksMatrix) {\n  var outNodes = Object.keys(nodes);\n\n  if (config.collapsible) {\n    outNodes = outNodes.filter(function (nodeId) {\n      return (0, _collapse.isNodeVisible)(nodeId, nodes, linksMatrix);\n    });\n  }\n\n  return outNodes.map(function (nodeId) {\n    var props = (0, _graph2.buildNodeProps)(_objectSpread({}, nodes[nodeId], {\n      id: \"\".concat(nodeId)\n    }), config, nodeCallbacks, highlightedNode, highlightedLink, transform);\n    return _react[\"default\"].createElement(_Node[\"default\"], _extends({\n      key: nodeId\n    }, props));\n  });\n}\n/**\n * Builds graph defs (for now markers, but we could also have gradients for instance).\n * NOTE: defs are static svg graphical objects, thus we only need to render them once, the result\n * is cached on the 1st call and from there we simply return the cached jsx.\n * @returns {Function} memoized build definitions function.\n * @memberof Graph/renderer\n */\n\n\nfunction _renderDefs() {\n  var cachedDefs;\n  return function (config) {\n    if (cachedDefs) {\n      return cachedDefs;\n    }\n\n    var _getMarkerSize = (0, _marker2.getMarkerSize)(config),\n        small = _getMarkerSize.small,\n        medium = _getMarkerSize.medium,\n        large = _getMarkerSize.large;\n\n    var markerProps = {\n      markerWidth: config.link.markerWidth,\n      markerHeight: config.link.markerHeight\n    };\n    cachedDefs = _react[\"default\"].createElement(\"defs\", null, _react[\"default\"].createElement(_Marker[\"default\"], _extends({\n      id: _marker.MARKERS.MARKER_S,\n      refX: small,\n      fill: config.link.color\n    }, markerProps)), _react[\"default\"].createElement(_Marker[\"default\"], _extends({\n      id: _marker.MARKERS.MARKER_SH,\n      refX: small,\n      fill: config.link.highlightColor\n    }, markerProps)), _react[\"default\"].createElement(_Marker[\"default\"], _extends({\n      id: _marker.MARKERS.MARKER_M,\n      refX: medium,\n      fill: config.link.color\n    }, markerProps)), _react[\"default\"].createElement(_Marker[\"default\"], _extends({\n      id: _marker.MARKERS.MARKER_MH,\n      refX: medium,\n      fill: config.link.highlightColor\n    }, markerProps)), _react[\"default\"].createElement(_Marker[\"default\"], _extends({\n      id: _marker.MARKERS.MARKER_L,\n      refX: large,\n      fill: config.link.color\n    }, markerProps)), _react[\"default\"].createElement(_Marker[\"default\"], _extends({\n      id: _marker.MARKERS.MARKER_LH,\n      refX: large,\n      fill: config.link.highlightColor\n    }, markerProps)));\n    return cachedDefs;\n  };\n}\n/**\n * Memoized reference for _renderDefs.\n * @param  {Object} config - an object containing rd3g consumer defined configurations {@link #config config} for the graph.\n * @returns {Object} graph reusable objects [defs](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/defs).\n * @memberof Graph/renderer\n */\n\n\nvar _memoizedRenderDefs = _renderDefs();\n/**\n * Method that actually is exported an consumed by Graph component in order to build all Nodes and Link\n * components.\n * @param  {Object.<string, Object>} nodes - an object containing all nodes mapped by their id.\n * @param  {Function[]} nodeCallbacks - array of callbacks for used defined event handler for node interactions.\n * @param  {Array.<Object>} links - array of links {@link #Link|Link}.\n * @param  {Object.<string, Object>} linksMatrix - an object containing a matrix of connections of the graph, for each nodeId,\n * there is an Object that maps adjacent nodes ids (string) and their values (number).\n * ```javascript\n *  // links example\n *  {\n *     \"Androsynth\": {\n *         \"Chenjesu\": 1,\n *         \"Ilwrath\": 1,\n *         \"Mycon\": 1,\n *         \"Spathi\": 1,\n *         \"Umgah\": 1,\n *         \"VUX\": 1,\n *         \"Guardian\": 1\n *     },\n *     \"Chenjesu\": {\n *         \"Androsynth\": 1,\n *         \"Mycon\": 1,\n *         \"Spathi\": 1,\n *         \"Umgah\": 1,\n *         \"VUX\": 1,\n *         \"Broodhmome\": 1\n *     },\n *     ...\n *  }\n * ```\n * @param  {Function[]} linkCallbacks - array of callbacks for used defined event handler for link interactions.\n * @param  {Object} config - an object containing rd3g consumer defined configurations {@link #config config} for the graph.\n * @param  {string} highlightedNode - this value contains a string that represents the some currently highlighted node.\n * @param  {Object} highlightedLink - this object contains a source and target property for a link that is highlighted at some point in time.\n * @param  {string} highlightedLink.source - id of source node for highlighted link.\n * @param  {string} highlightedLink.target - id of target node for highlighted link.\n * @param  {number} transform - value that indicates the amount of zoom transformation.\n * @returns {Object} returns an object containing the generated nodes and links that form the graph.\n * @memberof Graph/renderer\n */\n\n\nfunction renderGraph(nodes, nodeCallbacks, links, linksMatrix, linkCallbacks, config, highlightedNode, highlightedLink, transform) {\n  return {\n    nodes: _renderNodes(nodes, nodeCallbacks, config, highlightedNode, highlightedLink, transform, linksMatrix),\n    links: _renderLinks(nodes, links, linksMatrix, config, linkCallbacks, highlightedNode, highlightedLink, transform),\n    defs: _memoizedRenderDefs(config)\n  };\n}","map":{"version":3,"sources":["/home/telix/dictio-grapho/frontend/node_modules/react-d3-graph/lib/components/graph/graph.renderer.js"],"names":["Object","defineProperty","exports","value","renderGraph","_react","_interopRequireDefault","require","_graph","_marker","_Link","_Node","_Marker","_graph2","_graph3","_collapse","_marker2","obj","__esModule","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","_renderLinks","nodes","links","linksMatrix","config","linkCallbacks","highlightedNode","highlightedLink","transform","outLinks","collapsible","_ref","isHidden","map","link","sourceId","getId","targetId","concat","COORDS_SEPARATOR","props","buildLinkProps","createElement","id","_renderNodes","nodeCallbacks","outNodes","nodeId","isNodeVisible","buildNodeProps","_renderDefs","cachedDefs","_getMarkerSize","getMarkerSize","small","medium","large","markerProps","markerWidth","markerHeight","MARKERS","MARKER_S","refX","fill","color","MARKER_SH","highlightColor","MARKER_M","MARKER_MH","MARKER_L","MARKER_LH","_memoizedRenderDefs","defs"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderGraph = renderGraph;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _graph = _interopRequireDefault(require(\"./graph.const\"));\n\nvar _marker = require(\"../marker/marker.const\");\n\nvar _Link = _interopRequireDefault(require(\"../link/Link\"));\n\nvar _Node = _interopRequireDefault(require(\"../node/Node\"));\n\nvar _Marker = _interopRequireDefault(require(\"../marker/Marker\"));\n\nvar _graph2 = require(\"./graph.builder\");\n\nvar _graph3 = require(\"../graph/graph.helper\");\n\nvar _collapse = require(\"./collapse.helper\");\n\nvar _marker2 = require(\"../marker/marker.helper\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * Build Link components given a list of links.\n * @param  {Object.<string, Object>} nodes - same as {@link #graphrenderer|nodes in renderGraph}.\n * @param  {Array.<Object>} links - array of links {@link #Link|Link}.\n * @param  {Array.<Object>} linksMatrix - array of links {@link #Link|Link}.\n * @param  {Object} config - same as {@link #graphrenderer|config in renderGraph}.\n * @param  {Function[]} linkCallbacks - same as {@link #graphrenderer|linkCallbacks in renderGraph}.\n * @param  {string} highlightedNode - same as {@link #graphrenderer|highlightedNode in renderGraph}.\n * @param  {Object} highlightedLink - same as {@link #graphrenderer|highlightedLink in renderGraph}.\n * @param  {number} transform - value that indicates the amount of zoom transformation.\n * @returns {Array.<Object>} returns the generated array of Link components.\n * @memberof Graph/renderer\n */\nfunction _renderLinks(nodes, links, linksMatrix, config, linkCallbacks, highlightedNode, highlightedLink, transform) {\n  var outLinks = links;\n\n  if (config.collapsible) {\n    outLinks = outLinks.filter(function (_ref) {\n      var isHidden = _ref.isHidden;\n      return !isHidden;\n    });\n  }\n\n  return outLinks.map(function (link) {\n    var source = link.source,\n        target = link.target;\n    var sourceId = (0, _graph3.getId)(source);\n    var targetId = (0, _graph3.getId)(target);\n    var key = \"\".concat(sourceId).concat(_graph[\"default\"].COORDS_SEPARATOR).concat(targetId);\n    var props = (0, _graph2.buildLinkProps)(_objectSpread({}, link, {\n      source: \"\".concat(sourceId),\n      target: \"\".concat(targetId)\n    }), nodes, linksMatrix, config, linkCallbacks, \"\".concat(highlightedNode), highlightedLink, transform);\n    return _react[\"default\"].createElement(_Link[\"default\"], _extends({\n      key: key,\n      id: key\n    }, props));\n  });\n}\n/**\n * Function that builds Node components.\n * @param  {Object.<string, Object>} nodes - an object containing all nodes mapped by their id.\n * @param  {Function[]} nodeCallbacks - array of callbacks for used defined event handler for node interactions.\n * @param  {Object} config - an object containing rd3g consumer defined configurations {@link #config config} for the graph.\n * @param  {string} highlightedNode - this value contains a string that represents the some currently highlighted node.\n * @param  {Object} highlightedLink - this object contains a source and target property for a link that is highlighted at some point in time.\n * @param  {string} highlightedLink.source - id of source node for highlighted link.\n * @param  {string} highlightedLink.target - id of target node for highlighted link.\n * @param  {number} transform - value that indicates the amount of zoom transformation.\n * @param  {Object.<string, Object>} linksMatrix - the matrix of connections of the graph\n * @returns {Array.<Object>} returns the generated array of node components\n * @memberof Graph/renderer\n */\n\n\nfunction _renderNodes(nodes, nodeCallbacks, config, highlightedNode, highlightedLink, transform, linksMatrix) {\n  var outNodes = Object.keys(nodes);\n\n  if (config.collapsible) {\n    outNodes = outNodes.filter(function (nodeId) {\n      return (0, _collapse.isNodeVisible)(nodeId, nodes, linksMatrix);\n    });\n  }\n\n  return outNodes.map(function (nodeId) {\n    var props = (0, _graph2.buildNodeProps)(_objectSpread({}, nodes[nodeId], {\n      id: \"\".concat(nodeId)\n    }), config, nodeCallbacks, highlightedNode, highlightedLink, transform);\n    return _react[\"default\"].createElement(_Node[\"default\"], _extends({\n      key: nodeId\n    }, props));\n  });\n}\n/**\n * Builds graph defs (for now markers, but we could also have gradients for instance).\n * NOTE: defs are static svg graphical objects, thus we only need to render them once, the result\n * is cached on the 1st call and from there we simply return the cached jsx.\n * @returns {Function} memoized build definitions function.\n * @memberof Graph/renderer\n */\n\n\nfunction _renderDefs() {\n  var cachedDefs;\n  return function (config) {\n    if (cachedDefs) {\n      return cachedDefs;\n    }\n\n    var _getMarkerSize = (0, _marker2.getMarkerSize)(config),\n        small = _getMarkerSize.small,\n        medium = _getMarkerSize.medium,\n        large = _getMarkerSize.large;\n\n    var markerProps = {\n      markerWidth: config.link.markerWidth,\n      markerHeight: config.link.markerHeight\n    };\n    cachedDefs = _react[\"default\"].createElement(\"defs\", null, _react[\"default\"].createElement(_Marker[\"default\"], _extends({\n      id: _marker.MARKERS.MARKER_S,\n      refX: small,\n      fill: config.link.color\n    }, markerProps)), _react[\"default\"].createElement(_Marker[\"default\"], _extends({\n      id: _marker.MARKERS.MARKER_SH,\n      refX: small,\n      fill: config.link.highlightColor\n    }, markerProps)), _react[\"default\"].createElement(_Marker[\"default\"], _extends({\n      id: _marker.MARKERS.MARKER_M,\n      refX: medium,\n      fill: config.link.color\n    }, markerProps)), _react[\"default\"].createElement(_Marker[\"default\"], _extends({\n      id: _marker.MARKERS.MARKER_MH,\n      refX: medium,\n      fill: config.link.highlightColor\n    }, markerProps)), _react[\"default\"].createElement(_Marker[\"default\"], _extends({\n      id: _marker.MARKERS.MARKER_L,\n      refX: large,\n      fill: config.link.color\n    }, markerProps)), _react[\"default\"].createElement(_Marker[\"default\"], _extends({\n      id: _marker.MARKERS.MARKER_LH,\n      refX: large,\n      fill: config.link.highlightColor\n    }, markerProps)));\n    return cachedDefs;\n  };\n}\n/**\n * Memoized reference for _renderDefs.\n * @param  {Object} config - an object containing rd3g consumer defined configurations {@link #config config} for the graph.\n * @returns {Object} graph reusable objects [defs](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/defs).\n * @memberof Graph/renderer\n */\n\n\nvar _memoizedRenderDefs = _renderDefs();\n/**\n * Method that actually is exported an consumed by Graph component in order to build all Nodes and Link\n * components.\n * @param  {Object.<string, Object>} nodes - an object containing all nodes mapped by their id.\n * @param  {Function[]} nodeCallbacks - array of callbacks for used defined event handler for node interactions.\n * @param  {Array.<Object>} links - array of links {@link #Link|Link}.\n * @param  {Object.<string, Object>} linksMatrix - an object containing a matrix of connections of the graph, for each nodeId,\n * there is an Object that maps adjacent nodes ids (string) and their values (number).\n * ```javascript\n *  // links example\n *  {\n *     \"Androsynth\": {\n *         \"Chenjesu\": 1,\n *         \"Ilwrath\": 1,\n *         \"Mycon\": 1,\n *         \"Spathi\": 1,\n *         \"Umgah\": 1,\n *         \"VUX\": 1,\n *         \"Guardian\": 1\n *     },\n *     \"Chenjesu\": {\n *         \"Androsynth\": 1,\n *         \"Mycon\": 1,\n *         \"Spathi\": 1,\n *         \"Umgah\": 1,\n *         \"VUX\": 1,\n *         \"Broodhmome\": 1\n *     },\n *     ...\n *  }\n * ```\n * @param  {Function[]} linkCallbacks - array of callbacks for used defined event handler for link interactions.\n * @param  {Object} config - an object containing rd3g consumer defined configurations {@link #config config} for the graph.\n * @param  {string} highlightedNode - this value contains a string that represents the some currently highlighted node.\n * @param  {Object} highlightedLink - this object contains a source and target property for a link that is highlighted at some point in time.\n * @param  {string} highlightedLink.source - id of source node for highlighted link.\n * @param  {string} highlightedLink.target - id of target node for highlighted link.\n * @param  {number} transform - value that indicates the amount of zoom transformation.\n * @returns {Object} returns an object containing the generated nodes and links that form the graph.\n * @memberof Graph/renderer\n */\n\n\nfunction renderGraph(nodes, nodeCallbacks, links, linksMatrix, linkCallbacks, config, highlightedNode, highlightedLink, transform) {\n  return {\n    nodes: _renderNodes(nodes, nodeCallbacks, config, highlightedNode, highlightedLink, transform, linksMatrix),\n    links: _renderLinks(nodes, links, linksMatrix, config, linkCallbacks, highlightedNode, highlightedLink, transform),\n    defs: _memoizedRenderDefs(config)\n  };\n}"]},"metadata":{},"sourceType":"script"}