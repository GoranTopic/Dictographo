{"ast":null,"code":"import React, { forwardRef, useRef, useState, useEffect, useMemo, useLayoutEffect, useCallback, useImperativeHandle } from 'react';\nimport { omit } from 'jerrypick';\nimport fromEntries from 'fromentries';\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction index(kapsuleComponent, comboParam) {\n  var _ref = _typeof(comboParam) === 'object' ? comboParam : {\n    // support old schema for backwards compatibility\n    wrapperElementType: comboParam,\n    methodNames: (arguments.length <= 2 ? undefined : arguments[2]) || undefined,\n    initPropNames: (arguments.length <= 3 ? undefined : arguments[3]) || undefined\n  },\n      _ref$wrapperElementTy = _ref.wrapperElementType,\n      wrapperElementType = _ref$wrapperElementTy === void 0 ? 'div' : _ref$wrapperElementTy,\n      _ref$nodeMapper = _ref.nodeMapper,\n      nodeMapper = _ref$nodeMapper === void 0 ? function (node) {\n    return node;\n  } : _ref$nodeMapper,\n      _ref$methodNames = _ref.methodNames,\n      methodNames = _ref$methodNames === void 0 ? [] : _ref$methodNames,\n      _ref$initPropNames = _ref.initPropNames,\n      initPropNames = _ref$initPropNames === void 0 ? [] : _ref$initPropNames;\n\n  return /*#__PURE__*/forwardRef(function (props, ref) {\n    var domEl = useRef();\n\n    var _useState = useState({}),\n        _useState2 = _slicedToArray(_useState, 2),\n        prevProps = _useState2[0],\n        setPrevProps = _useState2[1];\n\n    useEffect(function () {\n      return setPrevProps(props);\n    }); // remember previous props\n    // instantiate the inner kapsule component with the defined initPropNames\n\n    var comp = useMemo(function () {\n      var configOptions = fromEntries(initPropNames.filter(function (p) {\n        return props.hasOwnProperty(p);\n      }).map(function (prop) {\n        return [prop, props[prop]];\n      }));\n      return kapsuleComponent(configOptions);\n    }, []);\n    useLayoutEffect(function () {\n      comp(nodeMapper(domEl.current)); // mount kapsule synchronously on this element ref, optionally mapped into an object that the kapsule understands\n    }, []);\n    useEffect(function () {\n      // invoke destructor on unmount, if it exists\n      return comp._destructor instanceof Function ? comp._destructor : undefined;\n    }, []); // Call a component method\n\n    var _call = useCallback(function (method) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return comp[method] instanceof Function ? comp[method].apply(comp, args) : undefined;\n    } // method not found\n    , [comp]); // propagate component props that have changed\n\n\n    var dynamicProps = omit(props, [].concat(_toConsumableArray(methodNames), _toConsumableArray(initPropNames))); // initPropNames or methodNames should not be called\n\n    Object.keys(dynamicProps).filter(function (p) {\n      return prevProps[p] !== props[p];\n    }).forEach(function (p) {\n      return _call(p, props[p]);\n    }); // bind external methods to parent ref\n\n    useImperativeHandle(ref, function () {\n      return fromEntries(methodNames.map(function (method) {\n        return [method, function () {\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          return _call.apply(void 0, [method].concat(args));\n        }];\n      }));\n    });\n    return /*#__PURE__*/React.createElement(wrapperElementType, {\n      ref: domEl\n    });\n  });\n}\n\nexport default index;","map":{"version":3,"sources":["/home/telix/dictographo/frontend/node_modules/react-kapsule/dist/react-kapsule.module.js"],"names":["React","forwardRef","useRef","useState","useEffect","useMemo","useLayoutEffect","useCallback","useImperativeHandle","omit","fromEntries","_typeof","obj","Symbol","iterator","constructor","prototype","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","Object","from","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","length","err","o","minLen","n","toString","call","slice","name","test","len","arr2","TypeError","index","kapsuleComponent","comboParam","_ref","wrapperElementType","methodNames","arguments","initPropNames","_ref$wrapperElementTy","_ref$nodeMapper","nodeMapper","node","_ref$methodNames","_ref$initPropNames","props","ref","domEl","_useState","_useState2","prevProps","setPrevProps","comp","configOptions","filter","p","hasOwnProperty","map","prop","current","_destructor","Function","_call","method","_len","args","_key","apply","dynamicProps","concat","keys","forEach","_len2","_key2","createElement"],"mappings":"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","sourcesContent":["import React, { forwardRef, useRef, useState, useEffect, useMemo, useLayoutEffect, useCallback, useImperativeHandle } from 'react';\nimport { omit } from 'jerrypick';\nimport fromEntries from 'fromentries';\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction index (kapsuleComponent, comboParam) {\n  var _ref = _typeof(comboParam) === 'object' ? comboParam : {\n    // support old schema for backwards compatibility\n    wrapperElementType: comboParam,\n    methodNames: (arguments.length <= 2 ? undefined : arguments[2]) || undefined,\n    initPropNames: (arguments.length <= 3 ? undefined : arguments[3]) || undefined\n  },\n      _ref$wrapperElementTy = _ref.wrapperElementType,\n      wrapperElementType = _ref$wrapperElementTy === void 0 ? 'div' : _ref$wrapperElementTy,\n      _ref$nodeMapper = _ref.nodeMapper,\n      nodeMapper = _ref$nodeMapper === void 0 ? function (node) {\n    return node;\n  } : _ref$nodeMapper,\n      _ref$methodNames = _ref.methodNames,\n      methodNames = _ref$methodNames === void 0 ? [] : _ref$methodNames,\n      _ref$initPropNames = _ref.initPropNames,\n      initPropNames = _ref$initPropNames === void 0 ? [] : _ref$initPropNames;\n\n  return /*#__PURE__*/forwardRef(function (props, ref) {\n    var domEl = useRef();\n\n    var _useState = useState({}),\n        _useState2 = _slicedToArray(_useState, 2),\n        prevProps = _useState2[0],\n        setPrevProps = _useState2[1];\n\n    useEffect(function () {\n      return setPrevProps(props);\n    }); // remember previous props\n    // instantiate the inner kapsule component with the defined initPropNames\n\n    var comp = useMemo(function () {\n      var configOptions = fromEntries(initPropNames.filter(function (p) {\n        return props.hasOwnProperty(p);\n      }).map(function (prop) {\n        return [prop, props[prop]];\n      }));\n      return kapsuleComponent(configOptions);\n    }, []);\n    useLayoutEffect(function () {\n      comp(nodeMapper(domEl.current)); // mount kapsule synchronously on this element ref, optionally mapped into an object that the kapsule understands\n    }, []);\n    useEffect(function () {\n      // invoke destructor on unmount, if it exists\n      return comp._destructor instanceof Function ? comp._destructor : undefined;\n    }, []); // Call a component method\n\n    var _call = useCallback(function (method) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return comp[method] instanceof Function ? comp[method].apply(comp, args) : undefined;\n    } // method not found\n    , [comp]); // propagate component props that have changed\n\n\n    var dynamicProps = omit(props, [].concat(_toConsumableArray(methodNames), _toConsumableArray(initPropNames))); // initPropNames or methodNames should not be called\n\n    Object.keys(dynamicProps).filter(function (p) {\n      return prevProps[p] !== props[p];\n    }).forEach(function (p) {\n      return _call(p, props[p]);\n    }); // bind external methods to parent ref\n\n    useImperativeHandle(ref, function () {\n      return fromEntries(methodNames.map(function (method) {\n        return [method, function () {\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          return _call.apply(void 0, [method].concat(args));\n        }];\n      }));\n    });\n    return /*#__PURE__*/React.createElement(wrapperElementType, {\n      ref: domEl\n    });\n  });\n}\n\nexport default index;\n"]},"metadata":{},"sourceType":"module"}