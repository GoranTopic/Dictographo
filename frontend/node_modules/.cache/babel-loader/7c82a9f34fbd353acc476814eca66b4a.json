{"ast":null,"code":"var _jsxFileName = \"/home/telix/dictographo/frontend/src/App.js\";\nimport { initial_state, stateReducer } from './Components/State';\nimport CarouselContainer from './Components/Carousel';\nimport SideBarContainer from './Components/SideBar';\nimport { colors, API_ENDPOINT } from \"./myConfig\";\nimport NavBarContainer from './Components/NavBar';\nimport GraphContainer from './Components/Graph';\nimport AlertContainer from './Components/Alert';\nimport React from 'react';\nimport './App.css';\n\nfunction App() {\n  /* define dispatcher for the Internal data */\n  const processNode = node => {\n    /* process a node from the api into one for the dispatcher\n     * it changes title for id, for instance */\n    node['id'] = node.w_id;\n    node['key'] = node.w_id;\n    node['isSelected'] = false;\n    node['color'] = colors.node.default;\n    return node;\n  }; // retrive node with given node id from state \n\n\n  const getNode = (state, nodeId) => state.nodes.filter(node => node.id === nodeId)[0]; // attemps to return true id node is not in state\n\n\n  const isNotInState = (state, nodeId) => state.nodes.every(node => node.id !== nodeId);\n\n  const requestSynonymNodes = (node, dispatchState) => {\n    /* for every node request the adjecent node to it */\n    node.synonyms.forEach(synonym => {\n      if (isNotInState(synonym['synonym'])) {\n        fetch(API_ENDPOINT + synonym[\"synonym\"]).then(result => result.json()).then(result => processNode(result)).then(adjNode => {\n          dispatchState({\n            type: 'SET_NODE_LINK',\n            payload: {\n              node: adjNode,\n              link: {\n                source: node.id,\n                target: adjNode.id\n              }\n            }\n          });\n        }).catch(() => dispatchState({\n          type: 'SET_FETCH_FAILED'\n        }));\n      }\n    });\n  };\n\n  const isWordNotFound = result => {\n    // Set error to state when user search a word not found\n    if (result.detail === \"Not found.\") {\n      dispatchState({\n        type: 'SET_WORD_NOT_FOUND'\n      });\n      throw new Error(\"word not found\");\n    } else {\n      return result;\n    }\n  };\n\n  const onClickNode = function (nodeId) {\n    // console.log(`clicked node ${nodeId}`);\n    requestSynonymNodes(getNode(nodeId));\n    dispatchState({\n      type: 'SWITCH_SELECTED_NODE',\n      payload: nodeId\n    });\n  };\n  /*\n  const onMouseOverNode = function(nodeId) {\n  \t\tdispatchState({type:'SET_DEFINED_NODE', payload: nodeId})  \n  // need to fund a way to also run the default fuction \n  };*/\n\n\n  const [state, dispatchState] = React.useReducer(stateReducer, initial_state);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(NavBarContainer, {\n    state: state,\n    dispatchState: dispatchState,\n    processNode: processNode,\n    isWordNotFound: isWordNotFound,\n    requestSynonymNodes: requestSynonymNodes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(AlertContainer, {\n    state: state,\n    dispatchState: dispatchState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }), state.isEmpty ? /*#__PURE__*/React.createElement(CarouselContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'inline'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SideBarContainer, {\n    state: state,\n    dispatchState: dispatchState,\n    onClickNode: onClickNode,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(GraphContainer, {\n    state: state,\n    onClickNode: onClickNode,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/telix/dictographo/frontend/src/App.js"],"names":["initial_state","stateReducer","CarouselContainer","SideBarContainer","colors","API_ENDPOINT","NavBarContainer","GraphContainer","AlertContainer","React","App","processNode","node","w_id","default","getNode","state","nodeId","nodes","filter","id","isNotInState","every","requestSynonymNodes","dispatchState","synonyms","forEach","synonym","fetch","then","result","json","adjNode","type","payload","link","source","target","catch","isWordNotFound","detail","Error","onClickNode","useReducer","isEmpty","display"],"mappings":"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","sourcesContent":["import { initial_state, stateReducer } from './Components/State';\nimport CarouselContainer from './Components/Carousel';\nimport SideBarContainer from './Components/SideBar';\nimport { colors, API_ENDPOINT }  from \"./myConfig\";\nimport NavBarContainer from './Components/NavBar';\nimport GraphContainer from './Components/Graph';\nimport AlertContainer from './Components/Alert';\nimport React from 'react';\nimport './App.css';\n\nfunction App() {\n\t\t/* define dispatcher for the Internal data */\n\n\t\tconst processNode = (node) =>{\n\t\t\t\t/* process a node from the api into one for the dispatcher\n\t\t\t\t * it changes title for id, for instance */\n\t\t\t\tnode['id'] = node.w_id;\n\t\t\t\tnode['key'] = node.w_id;\n\t\t\t\tnode['isSelected'] = false;\n\t\t\t\tnode['color'] = colors.node.default;\n\t\t\t\treturn node\n\t\t}\n\n\t\t// retrive node with given node id from state \n\t\tconst getNode = (state, nodeId) => state.nodes.filter( node => node.id === nodeId )[0]\n\n\t\t// attemps to return true id node is not in state\n\t\tconst isNotInState = (state, nodeId) => state.nodes.every( node => node.id !== nodeId )\n\n\t\tconst requestSynonymNodes = (node, dispatchState) => {\n\t\t\t\t/* for every node request the adjecent node to it */\n\t\t\t\tnode.synonyms.forEach(synonym => {\n\t\t\t\t\t\tif(isNotInState(synonym['synonym'])){\n\t\t\t\t\t\t\t\tfetch(API_ENDPOINT + synonym[\"synonym\"])\n\t\t\t\t\t\t\t\t\t\t.then(result => result.json())\n\t\t\t\t\t\t\t\t\t\t.then(result => processNode(result))\n\t\t\t\t\t\t\t\t\t\t.then(adjNode => {\n\t\t\t\t\t\t\t\t\t\t\t\tdispatchState({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'SET_NODE_LINK', \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpayload: { \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnode: adjNode,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlink: { \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsource: node.id ,  \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget: adjNode.id \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t.catch(() => dispatchState({type:'SET_FETCH_FAILED'}))\n\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t}\n\n\t\tconst isWordNotFound = (result, ) =>{\n\t\t\t\t// Set error to state when user search a word not found\n\t\t\t\tif( result.detail === \"Not found.\" ) {\n\t\t\t\t\t\tdispatchState({type: 'SET_WORD_NOT_FOUND'})\n\t\t\t\t\t\tthrow new Error(\"word not found\")\n\t\t\t\t}else{\n\t\t\t\t\t\treturn result\n\t\t\t\t}\n\t\t}\n\n\t\tconst onClickNode = function(nodeId) {\n\t\t\t\t// console.log(`clicked node ${nodeId}`);\n\t\t\t\trequestSynonymNodes(getNode(nodeId))\n\t\t\t\tdispatchState({type:'SWITCH_SELECTED_NODE', payload: nodeId})  \n\t\t};\n\n\t\t/*\n\t\tconst onMouseOverNode = function(nodeId) {\n\t\t\t\tdispatchState({type:'SET_DEFINED_NODE', payload: nodeId})  \n// need to fund a way to also run the default fuction \n\t\t};*/\n\n\nconst [state, dispatchState] = React.useReducer( stateReducer, initial_state );\n\nreturn (\n\t\t<div className=\"App\">\n\t\t\t\t<NavBarContainer \n\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\tdispatchState={dispatchState} \n\t\t\t\t\t\tprocessNode={processNode} \n\t\t\t\t\t\tisWordNotFound={isWordNotFound} \n\t\t\t\t\t\trequestSynonymNodes={requestSynonymNodes} />\n\t\t\t\t<AlertContainer\n\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\tdispatchState={dispatchState} />\n\t\t\t\t{ state.isEmpty? \n\t\t\t\t\t\t<CarouselContainer/>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<div style={{display: 'inline',}}>\n\t\t\t\t\t\t\t\t<SideBarContainer \n\t\t\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\t\t\tdispatchState={dispatchState}\n\t\t\t\t\t\t\t\t\t\tonClickNode={onClickNode}/>\n\t\t\t\t\t\t\t\t<GraphContainer \n\t\t\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\t\t\tonClickNode={onClickNode}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t</div>\n);\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}