{"ast":null,"code":"import tinyColor from 'tinycolor2';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar ENTROPY = 123; // Raise numbers to prevent collisions in lower indexes\n\nvar int2HexColor = function int2HexColor(num) {\n  return \"#\".concat(Math.min(num, Math.pow(2, 24)).toString(16).padStart(6, '0'));\n};\n\nvar rgb2Int = function rgb2Int(r, g, b) {\n  return (r << 16) + (g << 8) + b;\n};\n\nvar colorStr2Int = function colorStr2Int(str) {\n  var _tinyColor$toRgb = tinyColor(str).toRgb(),\n      r = _tinyColor$toRgb.r,\n      g = _tinyColor$toRgb.g,\n      b = _tinyColor$toRgb.b;\n\n  return rgb2Int(r, g, b);\n};\n\nvar checksum = function checksum(n, csBits) {\n  return n * ENTROPY % Math.pow(2, csBits);\n};\n\nvar _default = /*#__PURE__*/function () {\n  function _default() {\n    var csBits = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 6;\n\n    _classCallCheck(this, _default);\n\n    this.csBits = csBits; // How many bits to reserve for checksum. Will eat away into the usable size of the registry.\n\n    this.registry = ['__reserved for background__']; // indexed objects for rgb lookup;\n  }\n\n  _createClass(_default, [{\n    key: \"register\",\n    value: function register(obj) {\n      if (this.registry.length >= Math.pow(2, 24 - this.csBits)) {\n        // color has 24 bits (-checksum)\n        return null; // Registry is full\n      }\n\n      var idx = this.registry.length;\n      var cs = checksum(idx, this.csBits);\n      var color = int2HexColor(idx + (cs << 24 - this.csBits));\n      this.registry.push(obj);\n      return color;\n    }\n  }, {\n    key: \"lookup\",\n    value: function lookup(color) {\n      var n = typeof color === 'string' ? colorStr2Int(color) : rgb2Int.apply(void 0, _toConsumableArray(color));\n      if (!n) return null; // 0 index is reserved for background\n\n      var idx = n & Math.pow(2, 24 - this.csBits) - 1; // registry index\n\n      var cs = n >> 24 - this.csBits & Math.pow(2, this.csBits) - 1; // extract bits reserved for checksum\n\n      if (checksum(idx, this.csBits) !== cs || idx >= this.registry.length) return null; // failed checksum or registry out of bounds\n\n      return this.registry[idx];\n    }\n  }]);\n\n  return _default;\n}();\n\nexport default _default;","map":{"version":3,"sources":["/home/telix/dictographo/frontend/node_modules/canvas-color-tracker/dist/canvas-color-tracker.module.js"],"names":["tinyColor","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","Symbol","iterator","from","o","minLen","n","toString","call","slice","constructor","name","test","len","arr2","ENTROPY","int2HexColor","num","concat","Math","min","pow","padStart","rgb2Int","r","g","b","colorStr2Int","str","_tinyColor$toRgb","toRgb","checksum","csBits","_default","arguments","undefined","registry","value","register","obj","idx","cs","color","push","lookup","apply"],"mappings":"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","sourcesContent":["import tinyColor from 'tinycolor2';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar ENTROPY = 123; // Raise numbers to prevent collisions in lower indexes\n\nvar int2HexColor = function int2HexColor(num) {\n  return \"#\".concat(Math.min(num, Math.pow(2, 24)).toString(16).padStart(6, '0'));\n};\n\nvar rgb2Int = function rgb2Int(r, g, b) {\n  return (r << 16) + (g << 8) + b;\n};\n\nvar colorStr2Int = function colorStr2Int(str) {\n  var _tinyColor$toRgb = tinyColor(str).toRgb(),\n      r = _tinyColor$toRgb.r,\n      g = _tinyColor$toRgb.g,\n      b = _tinyColor$toRgb.b;\n\n  return rgb2Int(r, g, b);\n};\n\nvar checksum = function checksum(n, csBits) {\n  return n * ENTROPY % Math.pow(2, csBits);\n};\n\nvar _default = /*#__PURE__*/function () {\n  function _default() {\n    var csBits = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 6;\n\n    _classCallCheck(this, _default);\n\n    this.csBits = csBits; // How many bits to reserve for checksum. Will eat away into the usable size of the registry.\n\n    this.registry = ['__reserved for background__']; // indexed objects for rgb lookup;\n  }\n\n  _createClass(_default, [{\n    key: \"register\",\n    value: function register(obj) {\n      if (this.registry.length >= Math.pow(2, 24 - this.csBits)) {\n        // color has 24 bits (-checksum)\n        return null; // Registry is full\n      }\n\n      var idx = this.registry.length;\n      var cs = checksum(idx, this.csBits);\n      var color = int2HexColor(idx + (cs << 24 - this.csBits));\n      this.registry.push(obj);\n      return color;\n    }\n  }, {\n    key: \"lookup\",\n    value: function lookup(color) {\n      var n = typeof color === 'string' ? colorStr2Int(color) : rgb2Int.apply(void 0, _toConsumableArray(color));\n      if (!n) return null; // 0 index is reserved for background\n\n      var idx = n & Math.pow(2, 24 - this.csBits) - 1; // registry index\n\n      var cs = n >> 24 - this.csBits & Math.pow(2, this.csBits) - 1; // extract bits reserved for checksum\n\n      if (checksum(idx, this.csBits) !== cs || idx >= this.registry.length) return null; // failed checksum or registry out of bounds\n\n      return this.registry[idx];\n    }\n  }]);\n\n  return _default;\n}();\n\nexport default _default;\n"]},"metadata":{},"sourceType":"module"}