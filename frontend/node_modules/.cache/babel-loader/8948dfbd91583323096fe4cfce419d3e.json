{"ast":null,"code":"var _jsxFileName = \"/home/telix/dictographo/frontend/src/Components/SearchSuggestion/SearchSuggestion.js\";\nimport React, { useState, useEffect } from 'react';\nimport { API_ENDPOINT } from \"../../myConfig\";\nimport useKeypress from '../../hooks/useKeypress';\nimport styles from './SearchSuggestion.css';\n/*\n * =======================================\n *      Search suggestion componenet\n * =======================================\n * for predicting  what the user is going to type\n */\n\nlet query_search = 'querysearch/'; //add this to myconfig\n\nfunction SuggestionsContainer(props) {\n  /* tahek a child fro a input an add suggestions to it */\n  // handle the change by seting the state variable to \n  let state = props.state;\n  let dispatchState = props.dispatchState;\n  const activeSuggestion = 1;\n  const [suggestions, setSuggestions] = useState([]);\n  const [selected, setSetselected] = useState(0);\n  useKeypress('keyup', () => console.log(\"key pressed\"));\n\n  const filterSuggestions = suggestions => suggestions.filter(suggestion => /\\s/.test(suggestion));\n\n  const onClick = word => {\n    /* append a given word to the seate searchTerm */\n    let wList = state.searchTerm.split(\" \");\n    let len = wList.length;\n    wList[len - 1] = word; // set the last word as clicke word\n\n    dispatchState({\n      type: 'SET_SEARCH_TERM',\n      payload: wList.join(\" \") + \" \"\n    });\n    setSuggestions([]); // reset suggestions\n  };\n\n  useEffect(() => {\n    /* query server for search suggestionsa\n     * and sets the  */\n    let wordList = state.searchTerm.split(\" \"); //split the search into words\n\n    let len = wordList.length; //get te lenght\n\n    let last = wordList[len - 1]; //fetch the last element \n\n    fetch(API_ENDPOINT + query_search + last).then(result => result.json()) //unpack suggestions\n    .then(result => {\n      console.log(result);\n      return result;\n    }) //unpack suggestions\n    .then(suggestions => filterSuggestions(suggestions)).then(suggestions => setSuggestions(suggestions)).catch(err => console.log(err));\n  }, [state.searchTerm, dispatchState]);\n\n  const SuggestionList = () => /*#__PURE__*/React.createElement(\"ul\", {\n    class: \"suggestions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, suggestions.map((suggestion, index) => {\n    let className;\n    if (index === activeSuggestion) className = styles.active;\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: index,\n      className: className,\n      onClick: () => onClick(suggestion.word),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 19\n      }\n    }, suggestion.word);\n  }));\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 14\n    }\n  }, props.children, state.searchTerm.length > 2 ? /*#__PURE__*/React.createElement(SuggestionList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 39\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null));\n}\n\nexport default SuggestionsContainer;","map":{"version":3,"sources":["/home/telix/dictographo/frontend/src/Components/SearchSuggestion/SearchSuggestion.js"],"names":["React","useState","useEffect","API_ENDPOINT","useKeypress","styles","query_search","SuggestionsContainer","props","state","dispatchState","activeSuggestion","suggestions","setSuggestions","selected","setSetselected","console","log","filterSuggestions","filter","suggestion","test","onClick","word","wList","searchTerm","split","len","length","type","payload","join","wordList","last","fetch","then","result","json","catch","err","SuggestionList","map","index","className","active","children"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { API_ENDPOINT }  from \"../../myConfig\";\nimport useKeypress from '../../hooks/useKeypress';\nimport styles from './SearchSuggestion.css'; \n\n/*\n * =======================================\n *      Search suggestion componenet\n * =======================================\n * for predicting  what the user is going to type\n */\n\nlet query_search = 'querysearch/' //add this to myconfig\n\nfunction SuggestionsContainer(props){\n\t\t/* tahek a child fro a input an add suggestions to it */\n\t\t// handle the change by seting the state variable to \n\t\tlet state = props.state\n\t\tlet dispatchState = props.dispatchState;\n\t\tconst activeSuggestion = 1;\n\t\tconst [suggestions, setSuggestions] = useState([])\t\n\t\tconst [selected, setSetselected] = useState(0)\t\n\t\n\t\tuseKeypress('keyup', () => console.log(\"key pressed\"));\n\n\n\t\tconst filterSuggestions = suggestions => \n\t\t\t\tsuggestions.filter( suggestion => /\\s/.test(suggestion))\n\n\t\tconst onClick = (word) => {\n\t\t\t\t/* append a given word to the seate searchTerm */\n\t\t\t\tlet wList = state.searchTerm.split(\" \");\n\t\t\t\tlet len = wList.length \n\t\t\t\twList[len-1] = word // set the last word as clicke word\n\t\t\t\tdispatchState({ \n\t\t\t\t\t\ttype: 'SET_SEARCH_TERM',\n\t\t\t\t\t\tpayload: wList.join(\" \") + \" \",\n\t\t\t\t});\t\n\t\t\t\tsetSuggestions([]); // reset suggestions\n\t\t}\n\n\n\t\tuseEffect(() => {\n\t\t\t\t/* query server for search suggestionsa\n\t\t\t\t * and sets the  */\n\t\t\t\tlet wordList = state.searchTerm.split(\" \");\n\t\t\t\t//split the search into words\n\t\t\t\tlet len = wordList.length;\n\t\t\t\t//get te lenght\n\t\t\t\tlet last = wordList[len-1]\n\t\t\t\t//fetch the last element \n\t\t\t\tfetch(API_ENDPOINT + query_search + last)\n\t\t\t\t\t\t.then(result => result.json()) //unpack suggestions\n\t\t\t\t\t\t.then(result => {console.log(result); return result})\n\t\t\t\t//unpack suggestions\n\t\t\t\t\t\t.then(suggestions => filterSuggestions(suggestions))\n\t\t\t\t\t\t.then(suggestions => setSuggestions(suggestions))\n\t\t\t\t\t\t.catch((err) => console.log(err));\n\t\t}, [state.searchTerm, dispatchState])\n\n\n\t\tconst SuggestionList = () =>\n\t\t\t\t<ul class=\"suggestions\">\n\t\t\t\t\t\t{ suggestions.map(\n\t\t\t\t\t\t\t\t(suggestion, index) => {  \n\t\t\t\t\t\t\t\t\t\tlet className;\n\t\t\t\t\t\t\t\t\t\tif (index === activeSuggestion) \n\t\t\t\t\t\t\t\t\t\t\t\tclassName = styles.active\n\t\t\t\t\t\t\t\t\t\treturn  <li \n\t\t\t\t\t\t\t\t\t\t\t\tkey={index} \n\t\t\t\t\t\t\t\t\t\t\t\tclassName={className}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onClick(suggestion.word)}>\n\t\t\t\t\t\t\t\t\t\t\t\t{suggestion.word}\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t</ul>\n\n\t\t\t\t\t\treturn <div className=\"input\">\n\t\t\t\t\t\t\t\t{props.children}\n\t\t\t\t\t\t\t\t{state.searchTerm.length > 2? <SuggestionList/>: <></> }\n\t\t\t\t\t\t</div>\n}\n\nexport default SuggestionsContainer;\n"]},"metadata":{},"sourceType":"module"}